<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TenantFit - Smarter Rental Pre-Screening</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        .container { 
            max-width: 900px;
            margin-top: 50px; 
        }
        .hidden { display: none; }
        @media (max-width: 991.98px) {
            .container {
                max-width: 98vw;
            }
        }
        td, th {
            white-space: normal !important;
            word-break: break-word;
        }
 
        @media (max-width: 575.98px) {
            .shadow-mobile-none {
                box-shadow: none !important;
            }
        }

        .dashboard-table thead th {
            position: sticky;
            top: 0;
            background: #f8f9fa;
            z-index: 1;
        }
        .dashboard-table tbody tr:hover {
            background: #e9ecef;
        }
        .dashboard-actions .btn {
            min-width: 2.5rem;
        }
        #loginEmail, #loginPassword {
            max-width: 500px;
        }
        @media (max-width: 575.98px) {
            .container {
                margin-top: auto;
            }
            .dashboard-actions {
                flex-wrap: wrap;
                justify-content: center;
            }
            .dashboard-actions .btn {
                flex: 1 1 auto;
                margin-bottom: 0.5rem;
            }
            .dashboard-table thead th.text-end {
                display: none; 
            }
            .dashboard-table tbody tr td {
                border-bottom: none; 
            }
            .dashboard-table tbody tr.d-sm-none td {
                border-bottom: 1px solid #dee2e6; 
            }
        }
        .thank-you-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            background-color: #f8f9fa;
        }
        .thank-you-screen h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        .thank-you-screen p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }
        .thank-you-screen .btn {
            font-size: 1rem;
            padding: 0.5rem 1rem;
        }

        /* Candidate Form Styling */
        #applyForm {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        #applyForm h3 {
            color: #343a40;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        #applyForm label {
            font-weight: 500;
            color: #495057;
        }

        #applyForm .form-text {
            font-size: 0.9rem;
            color: #6c757d;
        }

        #applyForm .form-label span.text-danger {
            color: #dc3545;
            font-weight: bold;
        }

        #applyForm .form-control,
        #applyForm .form-select {
            border: 1px solid #ced4da;
            border-radius: 4px;
            transition: border-color 0.3s ease;
        }

        #applyForm .form-control:focus,
        #applyForm .form-select:focus {
            border-color: #80bdff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }

        #applyForm .invalid-feedback {
            font-size: 0.85rem;
            color: #dc3545;
        }

        #applyForm .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        #applyForm .btn-primary:hover {
            background-color: #0056b3;
            border-color: #004085;
        }

        #applyForm .btn-secondary {
            background-color: #6c757d;
            border-color: #6c757d;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        #applyForm .btn-secondary:hover {
            background-color: #5a6268;
            border-color: #545b62;
        }

        #applyForm .section-title {
            font-size: 1.25rem;
            font-weight: bold;
            color: #343a40;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #007bff;
            padding-bottom: 0.5rem;
        }

        #applyForm .mb-3 {
            margin-bottom: 1.5rem;
        }

        #applyForm textarea {
            resize: none;
        }

        #applyForm .hidden {
            display: none;
        }
        
        .form-check-label {
            display: inline;
        }

        /* Improved Candidate Details Layout for Consistency */
        #tenantDetailsContent {
            max-width: 700px;
            margin: 0 auto;
        }
        .tenant-details-card {
            background: #fff;
            border-radius: 1rem;
            box-shadow: 0 2px 16px rgba(0,0,0,0.07);
            padding: 2rem 1.5rem 1.5rem 1.5rem;
            margin-bottom: 2rem;
        }
        .tenant-details-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }
        #candidateScoreBadge {
            font-size: 1.1rem;
            padding: 0.5em 1.2em;
            margin-bottom: 0.5rem;
            display: inline-block;
        }
        .details-section {
            margin-bottom: 2rem;
            background: #f8f9fa;
            border-radius: 0.5rem;
            padding: 1.25rem 1rem 1rem 1rem;
            box-shadow: 0 1px 4px rgba(0,0,0,0.04);
        }
        .details-section h3 {
            font-size: 1.15rem;
            font-weight: 600;
            color: #0d6efd;
            margin-bottom: 1rem;
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 0.25rem;
        }
        .details-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 0.5rem 1.5rem;
        }
        .detail-item {
            display: contents;
        }
        .detail-label {
            font-weight: 500;
            color: #495057;
            padding: 0.5rem 0;
            text-align: right;
            border-right: 2px solid #e9ecef;
            background: #f1f3f5;
            border-radius: 0.25rem 0 0 0.25rem;
            min-width: 120px;
        }
        .detail-value {
            padding: 0.5rem 0 0.5rem 1rem;
            color: #212529;
            background: #fff;
            border-radius: 0 0.25rem 0.25rem 0;
            border-left: 2px solid #e9ecef;
            min-width: 120px;
            word-break: break-word;
        }
        @media (max-width: 600px) {
            .tenant-details-card {
                padding: 1rem 0.5rem;
            }
            .details-section {
                padding: 1rem 0.5rem 0.5rem 0.5rem;
            }
            .details-grid {
                grid-template-columns: 1fr;
            }
            .detail-label, .detail-value {
                border: none;
                text-align: left;
                padding-left: 0;
            }
            .detail-value {
                padding-top: 0;
            }
        }

        /* Responsive Candidate Table */
        @media (max-width: 800px) {
            #tenantCandidatesContent table thead {
                display: none;
            }
            #tenantCandidatesContent table tbody tr {
                display: block;
                margin-bottom: 1.5rem;
                border: 1px solid #dee2e6;
                border-radius: 0.5rem;
                box-shadow: 0 1px 4px rgba(0,0,0,0.04);
                background: #fff;
                padding: 0.5rem 0.75rem;
            }
            #tenantCandidatesContent table tbody td {
                display: flex;
                width: 100%;
                justify-content: space-between;
                align-items: center;
                border: none !important;
                padding: 0.5rem 0;
                font-size: 1rem;
            }
            #tenantCandidatesContent table tbody td:before {
                content: attr(data-label);
                font-weight: 600;
                color: #495057;
                flex: 0 0 55%;
                text-align: left;
                padding-right: 1rem;
            }
            #tenantCandidatesContent table tbody td:last-child {
                justify-content: flex-end;
            }
        }
        @media (max-width: 500px) {
            #tenantCandidatesContent table tbody tr {
                padding: 0.25rem 0.25rem;
            }
            #tenantCandidatesContent table tbody td {
                font-size: 0.97rem;
            }
        }

    </style>
</head>
<body>
    <div class="container-fluid p-0">
        <!-- Register Screen -->
        <div id="registerScreen" class="hidden">
          <div class="min-vh-100 mt-1 d-flex  align-items-start justify-content-center">
            <div class="bg-white rounded-2 shadow shadow-mobile-none p-4 mx-auto col-12 col-sm-8 col-md-5 col-lg-3">
              <h2 class="mb-3 text-center">Register</h2>
              <form id="registerForm" novalidate>
                <div class="mb-3">
                  <label for="email" class="form-label">Email address</label>
                  <input type="email" class="form-control" id="email" required>
                  <div class="invalid-feedback">Please provide a valid email address.</div>
                </div>
                <div class="mb-3">
                  <label for="password" class="form-label">Password</label>
                  <input type="password" class="form-control" id="password" required>
                  <div class="invalid-feedback">Please provide a password.</div>
                </div>
                <div class="mb-3">
                  <label for="confirmPassword" class="form-label">Confirm Password</label>
                  <input type="password" class="form-control" id="confirmPassword" required>
                  <div class="invalid-feedback">Passwords must match.</div>
                </div>
                <div class="form-check mb-3">
                  <input class="form-check-input" type="checkbox" id="termsCheck" required>
                  <label class="form-check-label" for="termsCheck">
                    I agree to the Terms & Privacy Policy
                  </label>
                  <div class="invalid-feedback">You must agree to the terms.</div>
                </div>
                <div class="mb-3">
                  <div id="captchaContainer"></div>
                </div>
                <button type="button" class="btn btn-primary" onclick="register()">Register</button>
                <button type="button" class="btn btn-secondary" onclick="showLoginScreen()">Cancel</button>
              </form>
            </div>
          </div>
        </div>

        <!-- Confirm Email Screen -->
        <div id="confirmEmailScreen" class="hidden">
          <div class="min-vh-100 d-flex mt-1 align-items-start justify-content-center">
            <div class="bg-white rounded-2 shadow shadow-mobile-none p-4 mx-auto col-12 col-sm-8 col-md-5 col-lg-3">
              <h2 class="mb-3 text-center">Confirm Email</h2>
              <form id="confirmEmailForm" novalidate>
                <div class="mb-3">
                  <label for="confirmEmailInput" class="form-label">Email</label>
                  <input type="email" class="form-control" id="confirmEmailInput" required>
                  <div class="invalid-feedback">Please provide your email address.</div>
                </div>
                <div class="mb-3">
                  <label for="confirmationCode" class="form-label">Confirmation Code</label>
                  <input type="text" class="form-control" id="confirmationCode" required>
                  <div class="invalid-feedback">Please provide the confirmation code.</div>
                </div>
                <button type="button" class="btn btn-primary" onclick="handleConfirmEmail()">Confirm</button>
                <button type="button" class="btn btn-secondary" onclick="showLoginScreen()">Cancel</button>
              </form>
            </div>
          </div>
        </div>

        <!-- Login Screen -->
        <div id="loginScreen"  class="hidden">
          <div class="min-vh-100 d-flex mt-1 align-items-start justify-content-center">
            <div class="bg-white rounded-2 shadow shadow-mobile-none p-4 mx-auto col-12 col-sm-8 col-md-5 col-lg-3">
              <div class="text-center mb-4">
                <div class="logo"><a class="btn btn-link text-decoration-none p-0 m-0 align-baseline" onclick="showLandingScreen()">TenantFit</a>: Smarter rental pre-screening</div>
              </div>
              <form id="loginForm" novalidate>
                <div class="mb-3">
                  <label for="loginEmail" class="form-label">Email address</label>
                  <input type="email" class="form-control" id="loginEmail" name="loginEmail" required placeholder="you@example.com">
                  <div class="invalid-feedback">Please provide a valid email address.</div>
                </div>
                <div class="mb-3">
                  <label for="loginPassword" class="form-label d-flex justify-content-between">
                    <span>Password</span>
                    <a class="btn btn-link btn-sm text-decoration-none p-0 m-0 align-baseline" onclick="showForgotPasswordScreen()">Forgot password?</a>
                  </label>
                  <input type="password" class="form-control" id="loginPassword" name="loginPassword" required>
                  <div class="invalid-feedback">Please provide your password.</div>
                </div>
                <div class="d-grid mb-3">
                  <button type="button" class="btn btn-primary" onclick="login()">Log In</button>
                </div>
                <p class="text-center small text-muted">
                  Don't have an account?
                  <a class="btn btn-link btn-sm text-decoration-none p-0 m-0 align-baseline" onclick="showRegisterScreen()">Create one</a>
                </p>
                <div class="text-center mb-4">
                  <button class="btn btn-link btn-sm text-decoration-none p-0 m-0 align-baseline" type="button" onclick="showConfirmEmailScreen()"> Confirm Email</button> |
                  <button class="btn btn-link btn-sm text-decoration-none p-0 m-0 align-baseline" type="button" onclick="showResetPasswordScreen()"> Reset Password</button>
                </div>
              </form>
            </div>
          </div>
        </div>
        <div id="landingScreen"  class="hidden">
            <!-- Landing Page Content Start -->
            <section class="bg-light py-5 text-center">
                <div class="container">
                    <h1 class="display-5 fw-bold">Smarter Pre-Screening for Rental Leads</h1>
                    <p class="lead text-muted mt-3 mb-4">Cut the noise. Focus on qualified tenants. Save hours of messaging.</p>
                    <a onclick="showLoginScreen()" class="btn btn-primary btn-lg">Get Early Access</a>
                </div>
            </section>
            <section class="py-5">
                <div class="container">
                    <div class="row text-center mb-4">
                        <h2 class="fw-semibold">Why Landlords & Agents Use TenantFit</h2>
                    </div>
                    <div class="row text-center g-4">
                        <div class="col-md-4">
                            <div class="p-3 border rounded h-100">
                                <h5>Instant Pre-Screening</h5>
                                <p class="text-muted">Collect key info upfront—income range, move-in date, pets—without endless back-and-forth.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="p-3 border rounded h-100">
                                <h5>Keep It Simple</h5>
                                <p class="text-muted">No accounts, no sensitive data. Just one form and email-based communication.</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="p-3 border rounded h-100">
                                <h5>Free First Listing</h5>
                                <p class="text-muted">Test the tool at no cost. Only pay when you're ready to scale past your first property.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section class="bg-light py-5">
                <div class="container">
                    <div class="row text-center mb-4">
                        <h2 class="fw-semibold">How It Works</h2>
                    </div>
                    <div class="row text-center g-4">
                        <div class="col-md-4">
                            <h5>1. Add Your Property</h5>
                            <p class="text-muted">Create a listing and generate a custom link to share with potential tenants.</p>
                        </div>
                        <div class="col-md-4">
                            <h5>2. Receive Ranked Leads</h5>
                            <p class="text-muted">Candidates answer a short pre-screening form. We rank leads to save you time.</p>
                        </div>
                        <div class="col-md-4">
                            <h5>3. Contact the Best Fits</h5>
                            <p class="text-muted">Reach out directly by email. No names or phone numbers collected—privacy-first.</p>
                        </div>
                    </div>
                </div>
            </section>
            <footer class="bg-dark text-light text-center">
                <div class="container py-4">
                    <small class="">&copy; 2025 TenantFit. All rights reserved.</small>
                </div>
            </footer>
        </div>

        <!-- Forgot Password Screen -->
        <div id="forgotPasswordScreen" class="hidden">
          <div class="min-vh-100 d-flex mt-1 align-items-start justify-content-center">
            <div class="bg-white rounded-2 shadow shadow-mobile-none p-4 mx-auto col-12 col-sm-8 col-md-5 col-lg-3">
              <h2 class="mb-3 text-center">Forgot Password</h2>
              <form id="forgotPasswordForm" novalidate>
                <div class="mb-3">
                  <label for="forgotEmail" class="form-label">Email</label>
                  <input type="email" class="form-control" id="forgotEmail" required>
                  <div class="invalid-feedback">Please provide your email address.</div>
                </div>
                <button type="button" class="btn btn-primary" onclick="sendResetCode()">Send Reset Code</button>
                <button type="button" class="btn btn-secondary" onclick="showLoginScreen()">Cancel</button>
              </form>
            </div>

          </div>
        </div>

        <!-- Reset Password Screen -->
        <div id="resetPasswordScreen" class="hidden">
          <div class="min-vh-100 d-flex mt-1 align-items-start justify-content-center">
            <div class="bg-white rounded-2 shadow shadow-mobile-none p-4 mx-auto col-12 col-sm-8 col-md-5 col-lg-3">
              <h2 class="mb-3 text-center">Reset Password</h2>
              <form id="resetPasswordForm" novalidate>
                <div class="mb-3">
                  <label for="resetEmail" class="form-label">Email</label>
                  <input type="email" class="form-control" id="resetEmail" required>
                  <div class="invalid-feedback">Please provide your email address.</div>
                </div>
                <div class="mb-3">
                  <label for="resetCode" class="form-label">Reset Code</label>
                  <input type="text" class="form-control" id="resetCode" required>
                  <div class="invalid-feedback">Please provide the reset code.</div>
                </div>
                <div class="mb-3">
                  <label for="newPassword" class="form-label">New Password</label>
                  <input type="password" class="form-control" id="newPassword" required>
                  <div class="invalid-feedback">Please provide a new password.</div>
                </div>
                <div class="mb-3">
                  <label for="confirmNewPassword" class="form-label">Confirm New Password</label>
                  <input type="password" class="form-control" id="confirmNewPassword" required>
                  <div class="invalid-feedback">Passwords must match.</div>
                </div>
                <button type="button" class="btn btn-primary" onclick="resetPassword()">Reset Password</button>
                <button type="button" class="btn btn-secondary" onclick="showLoginScreen()">Cancel</button>
              </form>
            </div>
          </div>
        </div>

        <!-- Dashboard Screen -->
        <div id="dashboardScreen" class="hidden">
            <div class="min-vh-100 d-flex mt-1 align-items-start justify-content-center">
                <div class="bg-white rounded-2 shadow shadow-mobile-none p-4 mx-auto col-12 col-lg-8">
                    <div class="d-flex flex-column flex-sm-row justify-content-between align-items-sm-center mb-3 gap-2">
                        <button class="btn btn-success dashboard-header-btn" onclick="showAddPropertyScreen()">
                            <i class="bi bi-plus-lg"></i> Add New Property
                        </button>
                        <span id="usageMeter" class="badge bg-info text-dark align-self-start align-self-sm-center mt-2 mt-sm-0">1 of 1 active listings used</span>
                    </div>
                    <div class="mb-2">
                        <small class="text-muted">Want to activate more? <a href="#">Upgrade here</a></small>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-hover align-middle dashboard-table">
                            <thead>
                                <tr>
                                    <th style="width: 30%;">Address</th>
                                    <th style="width: 10%;">Status</th>
                                    <th style="width: 15%;">Candidates</th>
                                    <th class="text-end" style="width: 35%;">
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="propertiesTableBody">
                                <!-- Properties will be rendered here -->
                            </tbody>
                        </table>
                    </div>
                    <button type="button" class="btn btn-secondary mt-3" onclick="logout()">Log Out</button>
                </div>
            </div>
            
        </div>

        <!-- Public Property Screen -->
        <div id="publicPropertyScreen" class="hidden">
            <!-- Property Info Section -->
            <div id="publicPropertyContent" class="card mb-4 border-primary">
                <div class="card-header bg-primary text-white">
                    <h4 class="card-title mb-0" id="propertyAddress">Property Address</h4>
                </div>
                <div class="card-body">
                    <p class="card-text" id="propertyDescription">Property description will be displayed here.</p>
                    <p class="card-text">
                        <a href="#" target="_blank" id="propertyLink" class="text-decoration-none text-primary">View Listing</a>
                    </p>
                    <p class="card-text">
                        <small class="text-muted">Available: <span id="propertyAvailability">Availability date</span></small>
                    </p>
                </div>
            </div>

            <form id="applyForm" novalidate class="mt-4">
                <h3>Rental Application Form</h3>
                <p>We’ll ask a few basic questions to help the landlord understand if you’re a good fit for the rental.</p>
                <p><strong>Please do not enter any of the following:</strong></p>
                <ul>
                    <li>Full or partial names</li>
                    <li>Specific home or work addresses</li>
                    <li>Social Insurance Number (SIN) or passport number</li>
                    <li>Credit card or banking information</li>
                </ul>
                <p class="text-muted">This form is anonymous and lightweight. While we take reasonable steps to protect your data, we intentionally avoid collecting or storing sensitive personal information at this stage.</p>

                <!-- Section: Basic Information -->
                <div class="section-title">Contact</div>
                <div class="mb-3">
                    <label for="applicantEmail" class="form-label">Email Address <span class="text-danger">*</span></label>
                    <input type="email" class="form-control" id="applicantEmail" required>
                    <div class="form-text">Your email is not visible to the landlord and will be used for automated communication regarding your application status.</div>
                    <div class="invalid-feedback">Please provide a valid email address.</div>
                </div>
                <div class="mb-3">
                    <input type="checkbox" id="consentContact" required>
                    <label for="consentContact" class="form-check-label">I consent to being contacted at the email address provided regarding my rental application.</label>
                    <div class="invalid-feedback">You must consent to being contacted.</div>
                </div>
                <div class="mb-3">
                    <input type="checkbox" id="consentNews">
                    <label for="consentNews" class="form-check-label">I consent to receive occasional communication about news and new features of this website.</label>
                </div>

                <div class="section-title">Lifestyle</div>
                <div class="mb-3">
                    <label for="moveInDate" class="form-label">When are you planning to move in? <span class="text-danger">*</span></label>
                    <input type="date" class="form-control" id="moveInDate" required>
                    <div class="invalid-feedback">Please provide a valid move-in date. It cannot be in the past.</div>
                </div>
                <div class="mb-3">
                    <label for="occupants" class="form-label">How many people will live in the unit? <span class="text-danger">*</span></label>
                    <select class="form-select" id="occupants" required>
                        <option value="">Select...</option>
                        <option value="Just me">Just me</option>
                        <option value="2 people">2 people</option>
                        <option value="3 people">3 people</option>
                        <option value="4 people">4 people</option>
                        <option value="5 or more people">5 or more people</option>
                    </select>
                    <div class="invalid-feedback">Please select the number of occupants.</div>
                </div>
                <div class="mb-3">
                    <label for="smokers" class="form-label">Do you or anyone in your household smoke? <span class="text-danger">*</span></label>
                    <select class="form-select" id="smokers" required>
                        <option value="">Select...</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    <div class="invalid-feedback">Please specify if there are smokers in the household.</div>
                </div>
                <div class="mb-3">
                    <label for="pets" class="form-label">Do you have any pets? <span class="text-danger">*</span></label>
                    <select class="form-select" id="pets" required>
                        <option value="">Select...</option>
                        <option value="No">No</option>
                        <option value="Yes — Small">Yes — Small (e.g., cat, small dog, fish)</option>
                        <option value="Yes — Large">Yes — Large (e.g., large dog)</option>
                        <option value="Yes — Exotic">Yes — Exotic (e.g., rat, rabbit, reptile)</option>
                    </select>
                    <div class="invalid-feedback">Please specify if you have pets.</div>
                </div>
                <div class="mb-3 hidden" id="petDetailsContainer">
                    <label for="petDetails" class="form-label">Please describe number and type of your pets: <span class="text-danger">*</span></label>
                    <textarea class="form-control" id="petDetails" rows="3" required></textarea>
                    <div class="invalid-feedback">Please provide details about your pets.</div>
                </div>

                <!-- Section: Rental history -->
                <div class="mb-3">
                    <label for="housingSituation" class="form-label">What is your current housing situation? <span class="text-danger">*</span></label>
                    <select class="form-select" id="housingSituation" required>
                        <option value="">Select...</option>
                        <option value="Renting">Renting</option>
                        <option value="Living with family">Living with family</option>
                        <option value="Staying with friends">Staying with friends</option>
                        <option value="Own my home">Own my home</option>
                        <option value="Temporary housing">Temporary housing (e.g. sublet, hotel)</option>
                        <option value="Other">Other (please specify)</option>
                    </select>
                    <div class="invalid-feedback">Please select your current housing situation.</div>
                </div>
                <div class="mb-3">
                    <label for="residenceDuration" class="form-label">How long have you lived at your current residence? <span class="text-danger">*</span></label>
                    <select class="form-select" id="residenceDuration" required>
                        <option value="">Select...</option>
                        <option value="Less than 6 months">Less than 6 months</option>
                        <option value="6–12 months">6–12 months</option>
                        <option value="1–3 years">1–3 years</option>
                        <option value="3-5 years">3-5 years</option>
                        <option value="5-10 years">5-10 years</option>
                        <option value="Over 10 years">Over 10 years</option>
                    </select>
                    <div class="invalid-feedback">Please select how long you have lived at your current residence.</div>
                </div>
                <div class="mb-3">
                    <label for="reasonForMoving" class="form-label">Why are you moving? <span class="text-danger">*</span></label>
                    <textarea class="form-control" id="reasonForMoving" rows="3" required></textarea>
                    <div class="invalid-feedback">Please provide details about your move.</div>
                </div>
                <div class="mb-3">
                    <label for="privateLandlord" class="form-label">Have you rented from a private landlord before? <span class="text-danger">*</span></label>
                    <select class="form-select" id="privateLandlord" required>
                        <option value="">Select...</option>
                        <option value="Yes">Yes</option>
                        <option value="No (first-time renter)">No (first-time renter)</option>
                    </select>
                    <div class="invalid-feedback">Please specify if you have rented from a private landlord before.</div>
                </div>

                <!-- Sub-section: Rental History Details -->
                <div id="rentalHistoryDetails" class="hidden">
                    <div class="mb-3">
                        <label for="rentalUnits" class="form-label">How many rental units have you lived in within the past 5 years? <span class="text-danger">*</span></label>
                        <select class="form-select" id="rentalUnits" required>
                            <option value="">Select...</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="More than 5">More than 5</option>
                        </select>
                        <div class="invalid-feedback">Please select the number of rental units.</div>
                    </div>
                    <div class="mb-3">
                        <label for="rentDifficulty" class="form-label">Have you ever had difficulty paying rent on time in the past 2 years? <span class="text-danger">*</span></label>
                        <select class="form-select" id="rentDifficulty" required>
                            <option value="">Select...</option>
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                        </select>
                        <div class="invalid-feedback">Please specify if you have had difficulty paying rent.</div>
                    </div>
                    <div class="mb-3" id="rentDifficultyDetailsContainer" style="display: none;">
                        <label for="rentDifficultyDetails" class="form-label">Please briefly explain: <span class="text-danger">*</span></label>
                        <textarea class="form-control" id="rentDifficultyDetails" rows="3" required></textarea>
                        <div class="invalid-feedback">Please provide details about your rent difficulty.</div>
                    </div>
                    <div class="mb-3">
                        <label for="tenancyNotice" class="form-label">Have you ever received a formal notice from a landlord to end a tenancy? <span class="text-danger">*</span></label>
                        <select class="form-select" id="tenancyNotice" required>
                            <option value="">Select...</option>
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                        </select>
                        <div class="invalid-feedback">Please specify if you have received a formal notice.</div>
                    </div>
                    <div class="mb-3" id="tenancyNoticeDetailsContainer" style="display: none;">
                        <label for="tenancyNoticeDetails" class="form-label">Please briefly explain: <span class="text-danger">*</span></label>
                        <textarea class="form-control" id="tenancyNoticeDetails" rows="3" required></textarea>
                        <div class="invalid-feedback">Please provide details about the notice.</div>
                    </div>
                    <div class="mb-3">
                        <label for="rentalDispute" class="form-label">Have you ever been involved in a rental dispute that required mediation, tribunal, or legal action? <span class="text-danger">*</span></label>
                        <select class="form-select" id="rentalDispute" required>
                            <option value="">Select...</option>
                            <option value="No">No</option>
                            <option value="Yes">Yes</option>
                        </select>
                        <div class="invalid-feedback">Please specify if you have been involved in a rental dispute.</div>
                    </div>
                    <div class="mb-3" id="rentalDisputeDetailsContainer" style="display: none;">
                        <label for="rentalDisputeDetails" class="form-label">Please briefly explain: <span class="text-danger">*</span></label>
                        <textarea class="form-control" id="rentalDisputeDetails" rows="3" required></textarea>
                        <div class="invalid-feedback">Please provide details about the dispute.</div>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="businessActivity" class="form-label">Do you plan to operate any business or commercial activity from the rental property? <span class="text-danger">*</span></label>
                    <select class="form-select" id="businessActivity" required>
                        <option value="">Select...</option>
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                    </select>
                    <div class="invalid-feedback">Please specify if you plan to operate a business or commercial activity.</div>
                </div>
                <div class="mb-3" id="businessActivityDetailsContainer" style="display: none;">
                    <label for="businessActivityDetails" class="form-label">Please briefly explain: <span class="text-danger">*</span></label>
                    <textarea class="form-control" id="businessActivityDetails" rows="3" required></textarea>
                    <div class="invalid-feedback">Please provide details about your business activity.</div>
                </div>
                <div class="mb-3">
                    <label for="vehicles" class="form-label">How many vehicles do you plan to park at the property? <span class="text-danger">*</span></label>
                    <select class="form-select" id="vehicles" required>
                        <option value="">Select...</option>
                        <option value="None">None</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="More than 4">More than 4</option>
                    </select>
                    <div class="invalid-feedback">Please specify the number of vehicles you plan to park.</div>
                </div>
                <div class="mb-3">
                    <label for="specialVehicles" class="form-label">Do you own any vehicles that require special storage or parking (e.g., motorcycle, boat, RV, trailer)?</label>
                    <select class="form-select" id="specialVehicles" required>
                        <option value="">Select...</option>
                        <option value="None">None</option>
                        <option value="Yes — Motorcycle">Yes — Motorcycle</option>
                        <option value="Yes — Boat">Yes — Boat</option>
                        <option value="Yes — RV or Trailer">Yes — RV or Trailer</option>
                        <option value="Yes — Other">Yes — Other</option>
                    </select>
                    <div class="invalid-feedback">Please specify if you own any special vehicles.</div>
                </div>
                <div class="mb-3" id="specialVehiclesDetailsContainer" style="display: none;">
                    <label for="specialVehiclesDetails" class="form-label">Please briefly explain: <span class="text-danger">*</span></label>
                    <textarea class="form-control" id="specialVehiclesDetails" rows="3" required></textarea>
                    <div class="invalid-feedback">Please provide details about your special vehicles.</div>
                </div>
                <div class="section-title">Financials</div>
                <div class="mb-3">
                    <label for="grossIncome" class="form-label">What is your approximate gross monthly income? <span class="text-danger">*</span></label>
                    <select class="form-select" id="grossIncome" required>
                        <option value="">Select...</option>
                        <option value="Under $1000">Under $1000</option>
                        <option value="$1000 - $2000">$1000 - $2000</option>
                        <option value="$2000 - $3000">$2000 - $3000</option>
                        <option value="$3000 - $4000">$3000 - $4000</option>
                        <option value="$5000 - $6000">$5000 - $6000</option>
                        <option value="$7000 - $8000">$7000 - $8000</option>
                        <option value="$8000 - $9000">$8000 - $9000</option>
                        <option value="$9000 - $10000">$9000 - $10000</option>
                        <option value="Over $10000">Over $10000</option>
                    </select>
                    <div class="invalid-feedback">Please select your gross monthly income.</div>
                </div>
                <div class="mb-3">
                    <label for="employmentStatus" class="form-label">What is your current employment status? <span class="text-danger">*</span></label>
                    <select class="form-select" id="employmentStatus" required>
                        <option value="">Select...</option>
                        <option value="Employed Full-Time">Employed Full-Time</option>
                        <option value="Employed Part-Time">Employed Part-Time</option>
                        <option value="Self-Employed">Self-Employed</option>
                        <option value="Unemployed">Unemployed</option>
                        <option value="Retired">Retired</option>
                        <option value="Student">Student</option>
                    </select>
                    <div class="invalid-feedback">Please select your employment status.</div>
                </div>

                <!-- Sub-section: Employment details -->
                <div id="employmentDetails" style="display: none;">
                    <div class="mb-3">
                        <label for="profession" class="form-label">What is your current profession, field of work, or study? <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="profession" required>
                        <div class="invalid-feedback">Please provide your profession or field of work.</div>
                    </div>
                    <div class="mb-3">
                        <label for="employmentDuration" class="form-label">How long have you been with your current employer (or running your business)? <span class="text-danger">*</span></label>
                        <select class="form-select" id="employmentDuration" required>
                            <option value="">Select...</option>
                            <option value="Less than 6 months">Less than 6 months</option>
                            <option value="6–12 months">6–12 months</option>
                            <option value="1–3 years">1–3 years</option>
                            <option value="3-5 years">3-5 years</option>
                            <option value="5-10 years">5-10 years</option>
                            <option value="Over 10 years">Over 10 years</option>
                        </select>
                        <div class="invalid-feedback">Please select the duration of your employment.</div>
                    </div>
                </div>

                <div class="section-title">Summary</div>
                <div class="mb-3">
                    <label for="additionalInfo" class="form-label">Is there anything else you would like to share that might support your application?</label>
                    <textarea class="form-control" id="additionalInfo" rows="3"></textarea>
                </div>
                <div class="mb-3">
                    <label for="creditConsent" class="form-label">Do you consent to a credit, public records, or background check if requested at a later stage in the process? <span class="text-danger">*</span></label>
                    <select class="form-select" id="creditConsent" required>
                        <option value="">Select...</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    <div class="form-text">Your response helps the landlord understand how you'd prefer to proceed and may affect the application, depending on the landlord’s screening requirements.</div>
                    <div class="invalid-feedback">Please specify your consent preference.</div>
                </div>

                <div class="mb-3">
                    <input type="checkbox" id="declaration1" required>
                    <label for="declaration1" class="form-check-label">I declare that the information I provided is true and complete to the best of my knowledge.</label>
                    <div class="invalid-feedback">You must agree to this declaration.</div>
                </div>
                <div class="mb-3">
                    <input type="checkbox" id="declaration2" required>
                    <label for="declaration2" class="form-check-label">I understand that providing false information may result in my application being declined.</label>
                    <div class="invalid-feedback">You must agree to this declaration.</div>
                </div>

                <div id="applyFormErrors" class="text-danger mb-3 hidden"></div>
                <button type="button" class="btn btn-primary" onclick="submitApplication()">Submit Application</button>
            </form>
        </div>

        <!-- Add/Edit Property Screen -->
        <div id="addPropertyScreen" class="hidden">
            <div class="min-vh-100 d-flex mt-1 align-items-start justify-content-center">
                <div class="bg-white rounded-2 shadow shadow-mobile-none p-4 mx-auto col-12 col-lg-8">
                    <h2 id="propertyFormTitle">Add New Property</h2>
                    <form id="addPropertyForm" novalidate>
                        <input type="hidden" id="property_id">
                        <div class="mb-3">
                            <label for="property_address" class="form-label">Address <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" id="property_address" required>
                            <div class="invalid-feedback">Please provide an address.</div>
                        </div>
                        <div class="mb-3">
                            <label for="property_description" class="form-label">Description <span class="text-danger">*</span></label>
                            <textarea class="form-control" id="property_description" rows="3" required></textarea>
                            <div class="invalid-feedback">Please provide a description.</div>
                        </div>
                        <div class="mb-3">
                            <label for="property_link" class="form-label">Link (Optional)</label>
                            <input type="url" class="form-control" id="property_link">
                            <div class="invalid-feedback">Please provide a valid link.</div>
                        </div>
                        <div class="mb-3">
                            <label for="property_availability" class="form-label">Availability Date <span class="text-danger">*</span></label>
                            <input type="date" class="form-control" id="property_availability" required>
                            <div class="invalid-feedback">Please provide the availability date.</div>
                        </div>
                        <div class="mb-3">
                            <label for="property_rent" class="form-label">Rent ($) <span class="text-danger">*</span></label>
                            <input type="number" class="form-control" id="property_rent" required>
                            <div class="invalid-feedback">Please provide the rent amount.</div>
                        </div>
                        <button type="button" class="btn btn-primary" onclick="saveProperty()">Save</button>
                        <button type="button" class="btn btn-secondary" onclick="showDashboardScreen()">Cancel</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Tenant Candidates Screen -->
        <div id="tenantCandidatesScreen" class="hidden">
            <div class="min-vh-100 d-flex mt-1 align-items-start justify-content-center">
                <div class="bg-white rounded-2 shadow shadow-mobile-none p-4 mx-auto col-12 col-lg-8">
                    <h2 class="mb-4">Tenant Candidates</h2>
                    <div id="tenantCandidatesContent" class="mt-4"></div>
                    <button type="button" class="btn btn-secondary mt-3" onclick="showDashboardScreen()">Back to Dashboard</button>

                </div>
            </div>
        </div>

        <!-- Confirmation Screen -->
        <div id="confirmationScreen" class="hidden">
            <h2>Confirm Your Application</h2>
            <div id="confirmationContent" class="mt-4"></div>
            <button type="button" class="btn btn-primary" onclick="finalSubmitApplication()">Submit</button>
            <button type="button" class="btn btn-secondary" onclick="showPublicPropertyScreen()">Change</button>
        </div>

        <!-- Thank You Screen -->
        <div id="thankYouScreen" class="hidden">
            <div class="thank-you-screen">
                <h2>Thank You!</h2>
                <p id="thankYouMessage"></p>
                <button class="btn btn-primary" onclick="showPublicPropertyScreen()">Back to Property</button>
            </div>
        </div>

        <!-- Tenant Details Screen -->
        <div id="tenantDetailsScreen" class="hidden">
            <div class="min-vh-100 d-flex mt-1 align-items-start justify-content-center">
                <div class="bg-white rounded-2 shadow shadow-mobile-none p-4 mx-auto col-12 col-lg-8">
                    <h2 class="mb-4 px-4 pt-4">Tenant Details</h2>
                    <div id="tenantDetailsContent" class="mt-4 px-4"></div>
                    <div class="text-center px-4 pb-4">
                        <button type="button" class="btn btn-secondary mt-3" onclick="backToTenantCandidatesScreen()">Back to Candidates</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="alertContainer" class="alert hidden" role="alert" style="position: fixed; top: 10px; right: 10px; z-index: 1050;"></div>
    <div id="overlay" class="d-none position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-25 justify-content-center align-items-center" style="z-index:2000;">
        <div class="spinner-border text-primary" role="status" style="width:3rem;height:3rem;">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <template id="tenantDetailsTemplate">
        <div class="tenant-details-card shadow-none border-0 px-0">
            <div class="tenant-details-header">
                <span id="candidateScoreBadge" class="badge">
                    Score: <span class="score-value"></span>
                </span>
            </div>
            <div class="details-section">
                <h3>Application Summary</h3>
                <div class="details-grid">
                    <div class="detail-item">
                        <div class="detail-label">Application Date</div>
                        <div class="detail-value" data-field="applicationDate"></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Move-in Date</div>
                        <div class="detail-value" data-field="moveInDate"></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Number of Occupants</div>
                        <div class="detail-value" data-field="occupants"></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Smokers</div>
                        <div class="detail-value" data-field="smokers"></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Pets</div>
                        <div class="detail-value" data-field="pets"></div>
                    </div>
                    <div class="detail-item pet-details-item" style="display:none;">
                        <div class="detail-label">Pet Details</div>
                        <div class="detail-value" data-field="petDetails"></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Vehicles</div>
                        <div class="detail-value" data-field="vehicles"></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Special Vehicles</div>
                        <div class="detail-value" data-field="specialVehicles"></div>
                    </div>
                    <div class="detail-item special-vehicles-details-item" style="display:none;">
                        <div class="detail-label">Special Vehicles Details</div>
                        <div class="detail-value" data-field="specialVehiclesDetails"></div>
                    </div>
                </div>
            </div>
            <div class="details-section">
                <h3>Rental History</h3>
                <div class="details-grid">
                    <div class="detail-item">
                        <div class="detail-label">Current Housing</div>
                        <div class="detail-value" data-field="housingSituation"></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Residence Duration</div>
                        <div class="detail-value" data-field="residenceDuration"></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Reason for Moving</div>
                        <div class="detail-value" data-field="reasonForMoving"></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Private Landlord Before?</div>
                        <div class="detail-value" data-field="privateLandlord"></div>
                    </div>
                    <div class="detail-item rental-units-item" style="display:none;">
                        <div class="detail-label">Rental Units (last 5y)</div>
                        <div class="detail-value" data-field="rentalUnits"></div>
                    </div>
                    <div class="detail-item rent-difficulty-item" style="display:none;">
                        <div class="detail-label">Rent Difficulty</div>
                        <div class="detail-value" data-field="rentDifficulty"></div>
                    </div>
                    <div class="detail-item rent-difficulty-details-item" style="display:none;">
                        <div class="detail-label">Rent Difficulty Details</div>
                        <div class="detail-value" data-field="rentDifficultyDetails"></div>
                    </div>
                    <div class="detail-item tenancy-notice-item" style="display:none;">
                        <div class="detail-label">Tenancy Notice</div>
                        <div class="detail-value" data-field="tenancyNotice"></div>
                    </div>
                    <div class="detail-item tenancy-notice-details-item" style="display:none;">
                        <div class="detail-label">Tenancy Notice Details</div>
                        <div class="detail-value" data-field="tenancyNoticeDetails"></div>
                    </div>
                    <div class="detail-item rental-dispute-item" style="display:none;">
                        <div class="detail-label">Rental Dispute</div>
                        <div class="detail-value" data-field="rentalDispute"></div>
                    </div>
                    <div class="detail-item rental-dispute-details-item" style="display:none;">
                        <div class="detail-label">Rental Dispute Details</div>
                        <div class="detail-value" data-field="rentalDisputeDetails"></div>
                    </div>
                </div>
            </div>
            <div class="details-section">
                <h3>Employment & Income</h3>
                <div class="details-grid">
                    <div class="detail-item">
                        <div class="detail-label">Employment Status</div>
                        <div class="detail-value" data-field="employmentStatus"></div>
                    </div>
                    <div class="detail-item profession-item" style="display:none;">
                        <div class="detail-label">Profession / Field</div>
                        <div class="detail-value" data-field="profession"></div>
                    </div>
                    <div class="detail-item employment-duration-item" style="display:none;">
                        <div class="detail-label">Employment Duration</div>
                        <div class="detail-value" data-field="employmentDuration"></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Gross Monthly Income</div>
                        <div class="detail-value" data-field="grossIncome"></div>
                    </div>
                </div>
            </div>
            <div class="details-section">
                <h3>Business & Other</h3>
                <div class="details-grid">
                    <div class="detail-item">
                        <div class="detail-label">Business Activity</div>
                        <div class="detail-value" data-field="businessActivity"></div>
                    </div>
                    <div class="detail-item business-activity-details-item" style="display:none;">
                        <div class="detail-label">Business Activity Details</div>
                        <div class="detail-value" data-field="businessActivityDetails"></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Consent to Credit/Background Check</div>
                        <div class="detail-value" data-field="creditConsent"></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Additional Info</div>
                        <div class="detail-value" data-field="additionalInfo"></div>
                    </div>
                </div>
            </div>
            <div class="details-section">
                <h3>Declarations</h3>
                <div class="details-grid">
                    <div class="detail-item">
                        <div class="detail-label">Declaration: Info is True</div>
                        <div class="detail-value" data-field="declaration1"></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Declaration: No False Info</div>
                        <div class="detail-value" data-field="declaration2"></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Consent to Contact</div>
                        <div class="detail-value" data-field="consentContact"></div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Consent to News</div>
                        <div class="detail-value" data-field="consentNews"></div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="tenantCandidateRowTemplate">
        <tr>
            <td data-label="Move-In Date"></td>
            <td data-label="Occupants"></td>
            <td data-label="Employment Status" class="d-none d-md-table-cell"></td>
            <td data-label="Profession" class="d-none d-lg-table-cell"></td>
            <td data-label="Gross Income" class="d-none d-lg-table-cell"></td>
            <td data-label="Vehicles" class="d-none d-md-table-cell"></td>
            <td data-label="Score"></td>
            <td data-label="Application Date" class="d-none d-md-table-cell"></td>
            <td data-label="Details">
                <a href="javascript:void(0)">View</a>
            </td>
        </tr>
    </template>

    <script src="code.js?ts=1750908327"></script>
</body>
</html>
